<!doctype html>
<html lang="{{ session.get('lang','en') }}">
<head>
  <meta charset="utf-8" />
  <title>Properties â€” {{ (t.brand if (t and (t.get if t.get is defined else None) and t.get('brand')) else (t.brand if (t and getattr(t,'brand',None)) else 'Ravuri Properties')) }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/static/style.css" />
  <!-- keep your theme CSS (optional) -->
  <link rel="stylesheet" href="/static/style-additions.css?v=20251023" />
  <link rel="stylesheet" href="/static/style-luxury.css?v=20251023" />

  <style>
    /* Hero-specific overrides (keeps your theme intact) */
    :root { --brand-red: #e11d48; --brand-dark:#111827; }

    .site-hero{
      position:relative;
      height:420px;
      background-image: url('/static/hero-pool.jpg?v=20251023');
      background-size: cover;
      background-position: center;
      display:flex;
      align-items:flex-end;
      border-bottom:1px solid rgba(0,0,0,0.06);
      overflow:hidden;
    }
    .site-hero::before{ content:""; position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,0.12) 0%, rgba(0,0,0,0.38) 100%); z-index:1; }
    .hero-inner{ position:relative; width:100%; max-width:1200px; margin:0 auto; padding:28px; box-sizing:border-box; z-index:2; display:flex; justify-content:space-between; gap:12px; align-items:flex-end; }
    .brand-block { color:#fff; text-shadow:0 8px 28px rgba(0,0,0,0.45); display:flex; flex-direction:column; gap:6px; }
    .brand-line{ display:flex; align-items:baseline; gap:10px; line-height:1; }
    .brand-red{ color: var(--brand-red); font-family:"Playfair Display", serif; font-weight:700; font-size:44px; }
    .brand-dark{ color: #fff; font-family:"Poppins",sans-serif; font-weight:800; font-size:44px; margin-left:6px; opacity:0.95; }
    .brand-tagline{ color: rgba(255,255,255,0.95); font-size:14px; font-weight:600; }

    /* trust cards to the right of brand on hero */
    .trust-row-hero{ display:flex; gap:10px; align-items:flex-end; }
    .trust-card{ background:#fff; color:#0f1724; border-radius:10px; padding:10px 12px; min-width:160px; box-shadow:0 10px 28px rgba(0,0,0,0.12); font-size:13px; display:flex; flex-direction:column; gap:6px; }
    .trust-title{ font-weight:800; font-size:13px; }

    /* page wrap and grid */
    .wrap{ max-width:1200px; margin:18px auto; padding:18px; box-sizing:border-box; background:transparent; }
    .grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:20px; margin-top:18px; }

    /* small responsive adjustments */
    @media (max-width:920px){
      .brand-red, .brand-dark{ font-size:34px; }
      .site-hero{ height:340px; }
      .hero-inner{ padding:18px; gap:8px; align-items:flex-end; flex-direction:column; align-items:flex-start; }
      .trust-row-hero{ width:100%; justify-content:flex-start; }
      .trust-card{ min-width:120px; padding:8px 10px; font-size:12px; }
    }
    @media (max-width:520px){
      .site-hero{ height:300px; background-position:center 36%; }
      .brand-red, .brand-dark{ font-size:30px; }
      .brand-block{ text-shadow:none; color:#111; }
    }
  </style>
</head>
<body>
  {# safe brand/year fallback (minimal Jinja) #}
  {% set brand_val = 'Ravuri Properties' %}
  {% if t %}
    {% if t.get is defined and t.get('brand') %}
      {% set brand_val = t.get('brand') %}
    {% elif (t.brand is defined and t.brand) %}
      {% set brand_val = t.brand %}
    {% endif %}
  {% endif %}

  <!-- HERO -->
  <header class="site-hero" role="banner" aria-label="Ravuri Properties hero">
    <div class="hero-inner">
      <div class="brand-block" aria-hidden="false">
        <div class="brand-line">
          <span class="brand-red">Ravuri</span><span class="brand-dark">Properties</span>
        </div>
        <div class="brand-tagline">Luxury Stays Â· Trusted Service</div>
      </div>

      <div class="trust-row-hero" aria-hidden="false">
        <div class="trust-card">
          <div class="trust-title">ðŸ”’ Secure payments</div>
          <div>Payments processed by Stripe. Card details never stored here.</div>
        </div>
        <div class="trust-card">
          <div class="trust-title">âœ… Instant confirmation</div>
          <div>Booking blocks dates immediately and you'll receive a confirmation email.</div>
        </div>
        <div class="trust-card">
          <div class="trust-title">ðŸ“ž Support</div>
          <div>Email: {{ (t.support_email if (t and (t.get if t.get is defined else None) and t.get('support_email')) else (t.support_email if (t and (t.support_email is defined)) else '') ) }}</div>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="wrap" role="main">
    <section class="grid" aria-label="Properties list">
      {% for slug, info in groups.items() %}
      <article class="card" aria-labelledby="title-{{ loop.index }}">
        <a class="media-link" href="/prop/{{ slug }}" aria-label="Open {{ info.title }}">
          <img class="card-image" src="{{ info.image_url }}" alt="{{ info.title }}" loading="lazy">
        </a>

        <div class="pad">
          <div id="title-{{ loop.index }}" class="title">{{ info.title }}</div>
          <div class="meta">Units: {{ info.unit_ids|length }}</div>

          {% if info.price %}
            <div class="price">à¸¿ {{ '%.0f'|format(info.price) }} <span class="muted">/ night ({{ info.currency or 'THB' }})</span></div>
          {% else %}
            <div class="price muted">Price: not set</div>
          {% endif %}

          <div class="card-actions">
            <a href="/prop/{{ slug }}" class="btn btn-outline">View</a>
            <a href="/prop/{{ slug }}#book" class="btn btn-primary">Book</a>
          </div>
        </div>
      </article>
      {% endfor %}
    </section>

    <footer class="page-footer" role="contentinfo" style="margin-top:22px;text-align:center;color:#6b7280;font-size:13px">
      <small>Â© {{ (t.get('year') if (t and t.get is defined and t.get('year')) else (t.year if (t and (t.year is defined)) else (2025)) ) }} {{ brand_val }} â€” Built with care</small>
    </footer>
  </main>

  <script>
    // fallback for the year if template didn't set correctly
    (function(){
      try{
        const el = document.querySelector('.page-footer small');
        if(el && !/\d{4}/.test(el.textContent)){
          el.textContent = `Â© ${new Date().getFullYear()} {{ brand_val }} â€” Built with care`;
        }
      }catch(e){}
    })();
  </script>
</body>
</html>
