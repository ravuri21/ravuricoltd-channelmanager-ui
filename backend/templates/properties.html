<!doctype html>
<html lang="{{ session.get('lang','en') }}">
<head>
  <meta charset="utf-8" />
  <title>Properties â€” {{ (t.brand if (t and t.brand) else 'Ravuri Properties') }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- base CSS -->
  <link rel="stylesheet" href="/static/style.css" />
  <!-- luxury theme CSS (if present) -->
  <link rel="stylesheet" href="/static/style-luxury.css?v=20251022" />

  <!-- Inline critical hero + brand overrides -->
  <style>
    .site-hero {
      position: relative;
      height: 420px;
      background-image: url('/static/hero-pool.jpg?v=20251023');
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: flex-end;
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .site-hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(0,0,0,0.12) 0%, rgba(0,0,0,0.36) 100%);
      pointer-events: none;
    }
    .hero-inner { position: relative; width:100%; max-width:1200px; margin:0 auto; padding:28px; box-sizing:border-box; }
    .brand-block { position:absolute; left:28px; bottom:28px; z-index:5; color:#fff; text-shadow:0 8px 28px rgba(0,0,0,0.45); display:flex; flex-direction:column; gap:6px; }
    .brand-line { display:flex; align-items:baseline; gap:10px; line-height:1; }
    .brand-red  { color:#e11d48; font-family:"Playfair Display", serif; font-weight:700; font-size:44px; }
    .brand-dark { color:#0f1724; font-family:"Poppins",sans-serif; font-weight:800; font-size:44px; margin-left:6px; }
    .brand-tagline { color:rgba(255,255,255,0.95); font-size:14px; font-weight:600; opacity:0.95; }

    .trust-row-hero { position:absolute; right:28px; bottom:24px; z-index:6; display:flex; gap:10px; align-items:center; }
    .trust-card { background:#fff; color:#111827; border-radius:10px; padding:10px 12px; min-width:160px; box-shadow:0 10px 28px rgba(0,0,0,0.12); font-size:13px; display:flex; flex-direction:column; gap:6px; }
    .trust-title { font-weight:800; color:#0f1724; font-size:13px; }

    .wrap { max-width:1200px; margin:18px auto; padding:10px 20px 48px; box-sizing:border-box; background:transparent; }
    .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap:20px; margin-top:20px; }

    @media (max-width:920px) {
      .brand-red, .brand-dark { font-size:34px; }
      .site-hero { height:340px; }
      .brand-block { left:18px; bottom:18px; right:18px; }
      .trust-row-hero { right:18px; bottom:16px; gap:6px; }
      .trust-card { min-width:120px; padding:8px 10px; font-size:12px; }
    }
    @media (max-width:520px) {
      .brand-red, .brand-dark { font-size:30px; }
      .site-hero { height:300px; background-position:center 36%; }
      .trust-row-hero { position: static; margin:12px 0 0; display:flex; justify-content:flex-start; }
      .brand-block { position: static; margin:12px 0; text-align:left; color:#111827; text-shadow:none; }
    }
  </style>
</head>
<body>
  <!-- HERO -->
  <header class="site-hero" role="banner" aria-label="Hero">
    <div class="hero-inner">
      <div class="brand-block" aria-hidden="false">
        <div class="brand-line">
          <span class="brand-red">Ravuri</span><span class="brand-dark">Properties</span>
        </div>
        <div class="brand-tagline">Luxury Stays Â· Trusted Service</div>
      </div>

      <div class="trust-row-hero" aria-hidden="false">
        <div class="trust-card">
          <div class="trust-title">ðŸ”’ Secure payments</div>
          <div>Payments processed by Stripe. Card details never stored here.</div>
        </div>
        <div class="trust-card">
          <div class="trust-title">âœ… Instant confirmation</div>
          <div>Booking blocks dates immediately and you'll receive a confirmation email.</div>
        </div>
        <div class="trust-card">
          <div class="trust-title">ðŸ“ž Support</div>
          <div>Email: {{ (t.support_email if (t and t.support_email) else '') }} â€” reply within 24 hours.</div>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="wrap" role="main">
    <section class="grid" aria-label="Properties grid">
      {% for slug, info in groups.items() %}
      <article class="card" aria-labelledby="title-{{ loop.index }}">
        <a class="media-link" href="/prop/{{ slug }}" aria-label="Open {{ info.title }}">
          <img class="card-image" src="{{ info.image_url }}" alt="{{ info.title }}" loading="lazy">
        </a>
        <div class="pad">
          <div id="title-{{ loop.index }}" class="title">{{ info.title }}</div>
          <div class="meta">Units: {{ info.unit_ids|length }}</div>
          {% if info.price %}
            <div class="price">à¸¿ {{ '%.0f'|format(info.price) }} <span class="muted">/ night ({{ info.currency or 'THB' }})</span></div>
          {% else %}
            <div class="price muted">Price: not set</div>
          {% endif %}
          <div class="card-actions">
            <a class="btn btn-outline" href="/prop/{{ slug }}">View</a>
            <a class="btn btn-primary" href="/prop/{{ slug }}#book">Book</a>
          </div>
        </div>
      </article>
      {% endfor %}
    </section>

    <footer class="page-footer" role="contentinfo" style="margin-top:26px;text-align:center;color:#6b7280;font-size:13px">
      <small>Â© {{ (t.year if (t and getattr(t,'year',None) ) else ( 2025 )) }} {{ (t.brand if (t and t.brand) else 'Ravuri Properties') }} â€” Built with care</small>
    </footer>
  </main>

  <!-- quick client-side fallback for footer year -->
  <script>
    (function(){
      try{
        const el = document.querySelector('.page-footer small');
        if(el && !/\d{4}/.test(el.textContent)){
          el.textContent = `Â© ${new Date().getFullYear()} ${'Ravuri Properties'} â€” Built with care`;
        }
      }catch(e){}
    })();
  </script>
</body>
</html>
