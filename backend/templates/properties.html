<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Properties â€” {{ t.brand if t else "Properties" }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/static/style.css" />
  <style>
    /* small extra styles to keep immediate polish without editing global css */
    body{font-family:system-ui,Arial,Helvetica,sans-serif;background:#f6f8fa;margin:0;color:#222}
    .wrap{max-width:1100px;margin:22px auto;padding:18px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .card{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,.06);display:flex;flex-direction:column;transition:transform .12s,box-shadow .12s}
    .card:hover{transform:translateY(-6px);box-shadow:0 12px 28px rgba(0,0,0,.12)}
    .card img{width:100%;height:180px;object-fit:cover;display:block}
    .pad{padding:12px 14px;flex:1;display:flex;flex-direction:column;justify-content:space-between}
    .title{font-weight:700;margin-bottom:6px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .meta{color:#6b7280;font-size:.92rem;margin-bottom:8px}
    .price{font-size:1.05rem;font-weight:800;margin-bottom:10px}
    .buttons{display:flex;gap:8px}
    .btn{flex:1;padding:10px;border-radius:10px;border:0;font-weight:700;cursor:pointer;text-align:center;display:inline-block;text-decoration:none}
    .btn.view{background:#0ea5a4;color:#fff}    /* teal */
    .btn.book{background:#2563eb;color:#fff}    /* blue */
    .small{font-size:.92rem;padding:8px;border-radius:8px}
    .topline{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:12px}
    .muted{color:#6b7280}
    .stripe-badge{display:inline-block;background:#f8fafc;border-radius:8px;padding:6px 8px;font-size:.82rem;color:#0b5cff;margin-left:8px;border:1px solid #e6eefc}
    .trust-row{display:flex;gap:8px;margin:14px 0;flex-wrap:wrap}
    .trust-card{padding:10px;border-radius:8px;background:#fff;border:1px solid #eee;min-width:160px;flex:1}
    .rating{font-weight:700;color:#b45309}
    @media (max-width:720px){ .card img{height:140px} .topline{flex-direction:column;align-items:flex-start} }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topline">
      <div style="font-weight:800;font-size:1.1rem">{{ t.brand if t else "Properties" }}</div>
      <div class="muted">
        <span><a href="/lang/en">English</a></span> â€¢ <a href="/lang/th">à¹„à¸—à¸¢</a>
        {% if t.publishable_key %}<span class="stripe-badge">Secure payments by Stripe</span>{% endif %}
      </div>
    </div>

    <!-- Trust / Guarantees row -->
    <div class="trust-row" aria-hidden="false">
      <div class="trust-card">
        <div style="font-weight:700">ðŸ”’ Secure payments</div>
        <div style="color:#6b7280;margin-top:6px">Payments processed by Stripe. Card details never stored here.</div>
      </div>
      <div class="trust-card">
        <div style="font-weight:700">âœ… Instant confirmation</div>
        <div style="color:#6b7280;margin-top:6px">Booking blocks dates immediately and you'll receive a confirmation email.</div>
      </div>
      <div class="trust-card">
        <div style="font-weight:700">ðŸ“ž Support</div>
        <div style="color:#6b7280;margin-top:6px">Email: {{ t.support_email or '' }} â€” reply within 24 hours.</div>
      </div>
    </div>

    <div class="grid">
      {% for slug, info in groups.items() %}
      <div class="card" role="article" aria-labelledby="title-{{ loop.index }}">
        <a href="/prop/{{ slug }}" style="text-decoration:none;color:inherit">
          <img src="{{ info.image_url }}" alt="{{ info.title }}" loading="lazy">
        </a>
        <div class="pad">
          <div>
            <div id="title-{{ loop.index }}" class="title">{{ info.title }}</div>

            <!-- NOTE: We intentionally hide raw unit ids & internal text on public page for simplicity -->
            <div class="meta">Units: {{ info.unit_ids|length }}</div>

            {% if info.price %}
              <div class="price">à¸¿ {{ '%.0f'|format(info.price) }} <span class="muted">/ night ({{ info.currency or 'THB' }})</span></div>
            {% else %}
              <div class="price muted">Price: not set</div>
            {% endif %}

            <!-- small sample rating / testimonial â€” replace with real reviews if available -->
            <div style="margin-top:8px">
              <span class="rating">â˜… 4.8</span>
              <span style="color:#6b7280;margin-left:8px;font-size:.95rem"> Â· 235 reviews</span>
              <div style="margin-top:6px;color:#333">"Lovely stay â€” clean, helpful host." â€” <em>Verified guest</em></div>
            </div>
          </div>

          <div class="buttons" style="margin-top:10px">
            <a class="btn view" href="/prop/{{ slug }}">View</a>
            <a class="btn book" href="/prop/{{ slug }}#book">Book</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <div style="margin-top:20px;color:#666;font-size:.95rem;">
      <p>Showing public properties. For admin actions (sync, edit iCal), sign in to the admin dashboard.</p>
    </div>
  </div>
</body>
</html>
